# activeContext.md

## 現在の作業フォーカス

- tools/festival.py による英語テキストの音素・シラブル・ストレス・ストレス有無抽出処理の厳密化・型安全化・json 出力対応

## 直近の変更・決定事項

- pydantic による PhonemeInfo 型で厳密な型安全を実現
- S 式出力 →sexpdata パース →PhonemeInfo リスト変換 →json 出力まで一貫して型安全
- 記号や空白は word/phoneme=None で出力し、用途に応じてフィルタ可能
- コーディング規約・ruff/フォーマッター・例外処理（raise ... from e）を徹底
- テストケース: "hello", "Yes, It's ok! I see. Good!", "internationalization" で動作確認済み

## 次のステップ

- verbose 出力（詳細なデバッグ/中間情報出力）対応
- 必要に応じてファイル出力機能や記号フィルタ機能の追加

## 重要なパターン・好み

- print や json.dumps による見やすいデバッグ出力
- コードフォーマット・型厳密化・例外処理の徹底

## 学び・インサイト

- Festival は記号や空白も word として出力するため、用途に応じたフィルタが必要
- 長い単語や複雑な文でもシラブル・ストレス・音素が正確に抽出できる
- コードフォーマット・型厳密化・例外処理を徹底することで保守性・信頼性が大幅に向上する
